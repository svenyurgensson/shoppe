!function(t){t.tagator=function(e,n){var i={prefix:"tagator_",height:"auto",useDimmer:!1,showAllOptionsOnFocus:!1,allowAutocompleteOnly:!1,autocomplete:[]},a=this,o=-1,s=null,r=null,c=null,p=null,l=null,u={backspace:8,enter:13,escape:27,left:37,up:38,right:39,down:40,comma:188};a.settings={},a.init=function(){if(a.settings=t.extend({},i,n),a.settings.useDimmer&&0===t("#"+a.settings.prefix+"dimmer").length){var g=document.createElement("div");t(g).attr("id",a.settings.prefix+"dimmer"),t(g).hide(),t(document.body).prepend(g)}s=document.createElement("div"),void 0!==e.id&&t(s).attr("id",a.settings.prefix+e.id),t(s).addClass(a.settings.prefix+"element options-hidden"),t(s).css({padding:t(e).css("padding"),"flex-grow":t(e).css("flex-grow"),position:"relative"}),0!=parseInt(t(e).css("width"))&&t(s).css({width:t(e).css("width")}),"element"===a.settings.height&&t(s).css({height:t(e).outerHeight()+"px"}),t(e).after(s),t(e).hide(),p=document.createElement("span"),t(p).addClass(a.settings.prefix+"textlength"),t(p).css({position:"absolute",visibility:"hidden"}),t(s).append(p),r=document.createElement("div"),t(r).addClass(a.settings.prefix+"tags"),t(s).append(r),c=document.createElement("input"),t(c).addClass(a.settings.prefix+"input"),t(c).width(20),t(c).attr("autocomplete","false"),t(s).append(c),l=document.createElement("ul"),t(l).addClass(a.settings.prefix+"options"),t(s).append(l),t(e).change(function(){f()}),t(s).bind("focus",function(e){e.preventDefault(),e.stopPropagation(),D(),t(c).focus()}),t(s).bind("mousedown",function(t){if(t.preventDefault(),t.stopPropagation(),c.focus(),c.setSelectionRange)c.focus(),c.setSelectionRange(c.value.length,c.value.length);else if(c.createTextRange){var e=c.createTextRange();e.collapse(!0),e.moveEnd("character",c.value.length),e.moveStart("character",c.value.length),e.select()}}),t(s).bind("mouseup",function(t){t.preventDefault(),t.stopPropagation()}),t(s).bind("click",function(t){t.preventDefault(),t.stopPropagation(),a.settings.showAllOptionsOnFocus&&x(),c.focus()}),t(s).bind("dblclick",function(t){t.preventDefault(),t.stopPropagation(),c.focus(),c.select()}),t(c).bind("click",function(t){t.preventDefault(),t.stopPropagation()}),t(c).bind("dblclick",function(t){t.preventDefault(),t.stopPropagation()}),t(c).bind("keydown",function(n){n.stopPropagation();var i=n.keyCode||n.which;switch(i){case u.up:n.preventDefault(),o>-1?o-=1:o=t(l).find("."+a.settings.prefix+"option").length-1,y(),k();break;case u.down:n.preventDefault(),o<t(l).find("."+a.settings.prefix+"option").length-1?o+=1:o=-1,y(),k();break;case u.escape:n.preventDefault();break;case u.comma:n.preventDefault(),-1===o&&""!==t(c).val()&&m(t(c).val()),d();break;case u.enter:n.preventDefault(),-1!==o?P():""!==t(c).val()&&m(t(c).val()),d();break;case u.backspace:""===c.value&&(t(e).val(t(e).val().substring(0,t(e).val().lastIndexOf(","))),t(e).trigger("change"),x()),d();break;default:d()}}),t(c).bind("keyup",function(e){e.preventDefault(),e.stopPropagation();var n=e.keyCode||e.which;n===u.escape||n===u.enter?C():(37>n||n>40)&&x(),!t(s).hasClass("options-hidden")||n!==u.left&&n!==u.right&&n!==u.up&&n!==u.down||x(),d()}),t(c).bind("focus",function(e){e.preventDefault(),e.stopPropagation(),(!t(l).is(":empty")||a.settings.showAllOptionsOnFocus)&&(x(),D())}),t(c).bind("blur",function(t){t.preventDefault(),t.stopPropagation(),C()}),f()};var d=function(){p.innerHTML=c.value,t(c).css({width:t(p).width()+20+"px"})};a.autocomplete=function(t){a.settings.autocomplete=void 0!==t?t:[]},a.refresh=function(){f()};var f=function(){t(r).empty();var n=t(e).val().split(",");t.each(n,function(n,i){if(""!==i&&h(i)){var o=document.createElement("div");t(o).addClass(a.settings.prefix+"tag"),t(o).html(i);var s=document.createElement("div");t(s).data("text",i),t(s).addClass(a.settings.prefix+"tag_remove"),t(s).bind("mousedown",function(t){t.preventDefault(),t.stopPropagation()}),t(s).bind("mouseup",function(n){n.preventDefault(),n.stopPropagation(),g(t(this).data("text")),t(e).trigger("change")}),t(s).html("X"),t(o).append(s);var c=document.createElement("div");c.style.clear="both",t(o).append(c),t(r).append(o)}}),x()},g=function(n){var i=t(e).val().split(","),a=[];t.each(i,function(t,e){e!==n&&""!==e&&a.push(e)}),t(e).val(a.join(","))},v=function(n){var i=t(e).val().split(","),a=!1;return t.each(i,function(e,i){t.trim(i)===t.trim(n)&&(a=!0)}),a},h=function(e){if(!a.settings.allowAutocompleteOnly)return!0;var n=!1;return t.each(a.settings.autocomplete,function(i,a){t.trim(a)===t.trim(e)&&(n=!0)}),n},m=function(n){!v(n)&&h(n)&&(t(e).val(t(e).val()+(""!==t(e).val()?",":"")+n),t(e).trigger("change")),t(c).val(""),s.focus(),C()},x=function(){if(t(l).empty(),""!==c.value.replace(/\s/g,"")||a.settings.showAllOptionsOnFocus){var e=[];t.each(a.settings.autocomplete,function(t,n){-1!==n.toLowerCase().indexOf(c.value.toLowerCase())&&(v(n)||e.push(n))}),b(e)}t(c).is(":focus")?t(l).is(":empty")?C():D():C(),o=-1},b=function(e){var n=-1;t(e).each(function(e,i){n++;var a=w(i,n);t(l).append(a)}),y()},w=function(e,n){var i=document.createElement("li");return t(i).data("index",n),t(i).data("text",e),t(i).html(e),t(i).addClass(a.settings.prefix+"option"),this.selected&&t(i).addClass("active"),t(i).bind("mouseover",function(t){t.stopPropagation(),t.preventDefault(),o=n,y()}),t(i).bind("mousedown",function(t){t.stopPropagation(),t.preventDefault()}),t(i).bind("click",function(t){t.preventDefault(),t.stopPropagation(),P()}),i},D=function(){t(s).removeClass("options-hidden").addClass("options-visible"),a.settings.useDimmer&&t("#"+a.settings.prefix+"dimmer").show(),t(l).css("top",t(s).outerHeight()-2+"px"),t(s).hasClass("single")&&(o=t(l).find("."+a.settings.prefix+"option").index(t(l).find("."+a.settings.prefix+"option.active"))),k()},C=function(){t(s).removeClass("options-visible").addClass("options-hidden"),a.settings.useDimmer&&t("#"+a.settings.prefix+"dimmer").hide()},y=function(){t(l).find(".active").removeClass("active"),-1!==o&&t(l).find("."+a.settings.prefix+"option").eq(o).addClass("active")},k=function(){var e=t(l).find("."+a.settings.prefix+"option.active");e.length>0&&t(l).scrollTop(t(l).scrollTop()+e.position().top-t(l).height()/2+e.height()/2)},P=function(){m(t(l).find("."+a.settings.prefix+"option").eq(o).data("text"))};a.destroy=function(){t(s).remove(),t.removeData(e,"tagator"),t(e).show(),0===t(".tagator").length&&t("#"+a.settings.prefix+"dimmer").remove()},a.init()},t.fn.tagator=function(){var e=void 0!==arguments[0]?arguments:[{}];return this.each(function(){if("object"==typeof e[0]){if(void 0===t(this).data("tagator")){var n=new t.tagator(this,e[0]);t(this).data("tagator",n)}}else t(this).data("tagator")[e[0]]?t(this).data("tagator")[e[0]].apply(this,Array.prototype.slice.call(e,1)):t.error("Method "+e[0]+" does not exist in $.tagator")})}}(jQuery),$(function(){$(".tagator").each(function(){var t=$(this),e={};$.each(t.data(),function(t,n){if("tagator"==t.substring(0,7)){var i=n.toString().replace(/'/g,'"');i=$.parseJSON(i),"object"==typeof i&&(n=i),e[t.substring(7,8).toLowerCase()+t.substring(8)]=n}}),t.tagator(e)})});
//# sourceMappingURL=fm.tagator.jquery.min.map